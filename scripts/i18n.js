// Language translations
const translations = {
  'zh-TW': {
    // Meta
    'meta.title': 'LinkTrove - ä¸€å€‹åˆ†é ï¼Œç®¡ç†æ‰€æœ‰æ›¸ç±¤',
    'meta.description': 'ç‚ºé‡åº¦åˆ†é ä½¿ç”¨è€…è¨­è¨ˆçš„ Chrome æ“´å……åŠŸèƒ½ã€‚å››å±¤ç´šæ¶æ§‹ã€æ‹–æ”¾æ’åºã€å³æ™‚åŒæ­¥ã€æ‰¹æ¬¡æ“ä½œï¼Œè®“ä½ çš„ç ”ç©¶è³‡æ–™äº•ç„¶æœ‰åºã€‚',

    // Navigation
    'nav.features': 'åŠŸèƒ½ç‰¹è‰²',
    'nav.demo': 'äº’å‹•å±•ç¤º',
    'nav.installation': 'å®‰è£æŒ‡å—',
    'nav.install_cta': 'ç«‹å³å®‰è£',

    // Hero Section
    'hero.title': 'ä¸€å€‹åˆ†é ï¼Œç®¡ç†æ‰€æœ‰æ›¸ç±¤',
    'hero.subtitle': 'ç‚ºé‡åº¦åˆ†é ä½¿ç”¨è€…è¨­è¨ˆçš„ Chrome æ“´å……åŠŸèƒ½ã€‚å››å±¤ç´šæ¶æ§‹ã€æ‹–æ”¾æ’åºã€å³æ™‚åŒæ­¥ã€æ‰¹æ¬¡æ“ä½œï¼Œè®“ä½ çš„ç ”ç©¶è³‡æ–™äº•ç„¶æœ‰åºã€‚',
    'hero.cta': 'å…è²»å®‰è£',
    'hero.learn_more': 'äº†è§£æ›´å¤š',

    // Features Section
    'features.title': 'åŠŸèƒ½ç‰¹è‰²',
    'features.subtitle': 'å°ˆç‚ºé‡åº¦åˆ†é ä½¿ç”¨è€…è¨­è¨ˆçš„å¼·å¤§åŠŸèƒ½',

    'feature.hierarchy.title': 'å››å±¤ç´šæ¶æ§‹',
    'feature.hierarchy.desc': 'çµ„ç¹” â†’ é›†åˆ â†’ ç¾¤çµ„ â†’ å¡ç‰‡ å±¤ç´šç®¡ç†ï¼Œè®“å¤§é‡æ›¸ç±¤äº•ç„¶æœ‰åº',

    'feature.dnd.title': 'æ‹–æ”¾æ’åº',
    'feature.dnd.desc': 'ç›´è¦ºæ‹–æ”¾å¡ç‰‡ï¼Œè‡ªç”±é‡æ–°æ’åºï¼Œé †åºæ°¸ä¹…ä¿å­˜',

    'feature.sync.title': 'å³æ™‚åˆ†é åŒæ­¥',
    'feature.sync.desc': 'å¤šè¦–çª—åˆ†é å³æ™‚åŒæ­¥ï¼Œæ”¯æ´è·¨è¦–çª—æ‹–å‹•',

    'feature.batch.title': 'æ‰¹æ¬¡æ“ä½œ',
    'feature.batch.desc': 'å¤šé¸å¡ç‰‡ã€æ‰¹æ¬¡åˆªé™¤/ç§»å‹•/é–‹å•Ÿï¼Œæå‡ç®¡ç†æ•ˆç‡',

    'feature.share.title': 'GitHub Gist åˆ†äº«',
    'feature.share.desc': 'ä¸€éµç”¢ç”Ÿåˆ†äº«é€£çµï¼Œé€é GitHub Gist å…¬é–‹æˆ–ç§å¯†åˆ†äº«',

    'feature.import.title': 'åŒ¯å…¥/åŒ¯å‡º',
    'feature.import.desc': 'æ”¯æ´ Toby v3/v4 JSONã€HTML æ›¸ç±¤åŒ¯å…¥ï¼Œå®Œæ•´å‚™ä»½é‚„åŸ',

    // Demo Section
    'demo.title': 'è©¦è©¦å°‡åˆ†é å„²å­˜ç‚ºå¡ç‰‡',
    'demo.subtitle': 'æ‹–æ›³å³å´çš„é–‹å•Ÿåˆ†é åˆ°å·¦å´ï¼Œé«”é©—å„²å­˜æ›¸ç±¤çš„æµæš¢æ“ä½œ',
    'demo.saved_cards': 'å·²å„²å­˜å¡ç‰‡',
    'demo.open_tabs': 'é–‹å•Ÿçš„åˆ†é ',
    'demo.drag_hint': 'å°‡åˆ†é æ‹–æ›³åˆ°é€™è£¡å„²å­˜',
    'demo.caption': 'å±¤ç´šåŒ–ä»‹é¢è¨­è¨ˆ',
    'demo.hint': 'ğŸ’¡ æç¤ºï¼šå¾å³å´æ‹–æ›³åˆ†é åˆ°å·¦å´å„²å­˜å€ï¼ˆæ”¯æ´æ»‘é¼ èˆ‡è§¸æ§ï¼‰',

    // Benefits Section
    'benefits.title': 'ç‚ºä»€éº¼é¸æ“‡ LinkTrove',
    'benefits.subtitle': 'å¾ä½¿ç”¨è€…è¦–è§’å‡ºç™¼ï¼Œè§£æ±ºçœŸå¯¦ç—›é»',

    'benefit1.number': '01',
    'benefit1.title': 'å‘Šåˆ¥åˆ†é åœ°ç„',
    'benefit1.desc': 'Chrome åˆ†é éå¤šå°è‡´è¨˜æ†¶é«”çˆ†ç‚¸ã€æ‰¾ä¸åˆ°éœ€è¦çš„ç¶²é ï¼Ÿå°‡åˆ†é å„²å­˜ç‚ºå¡ç‰‡ï¼Œéœ€è¦æ™‚å¿«é€Ÿæœå°‹ï¼ˆCtrl+Kï¼‰é–‹å•Ÿï¼Œè®“ç€è¦½å™¨ä¿æŒè¼•ç›ˆã€‚',

    'benefit2.number': '02',
    'benefit2.title': 'ç ”ç©¶è³‡æ–™ç³»çµ±åŒ–',
    'benefit2.desc': 'ç ”ç©¶è³‡æ–™æ•£è½å„è™•ï¼Œé›£ä»¥æ•´ç†åˆ†é¡ï¼Ÿä½¿ç”¨éšå±¤å¼çµ„ç¹”ï¼ˆçµ„ç¹” â†’ é›†åˆ â†’ ç¾¤çµ„ â†’ å¡ç‰‡ï¼‰ï¼Œè®“çŸ¥è­˜ç®¡ç†äº•ç„¶æœ‰åºã€‚',

    'benefit3.number': '03',
    'benefit3.title': 'å¤šè£ç½®ç„¡ç—›åŒæ­¥',
    'benefit3.desc': 'æ›é›»è…¦æˆ–ç€è¦½å™¨æ™‚æ›¸ç±¤éºå¤±ï¼Ÿæ”¯æ´ Google Drive é›²ç«¯åŒæ­¥ï¼Œè·¨è£ç½®è‡ªå‹•å‚™ä»½ã€‚ä¹Ÿå¯åŒ¯å‡º JSON å‚™ä»½ï¼Œéš¨æ™‚é‚„åŸã€‚',

    // Installation Section
    'install.title': 'é–‹å§‹ä½¿ç”¨ LinkTrove',
    'install.subtitle': 'é¸æ“‡é©åˆä½ çš„å®‰è£æ–¹å¼',
    'install.step1.title': 'æ­¥é©Ÿ 1ï¼šå®‰è£æ“´å……åŠŸèƒ½',
    'install.step1.desc': 'å¾ Chrome Web Store ä¸‹è¼‰å®‰è£ LinkTrove æ“´å……åŠŸèƒ½',
    'install.step1.button': 'å‰å¾€ Chrome Web Store',

    'install.step2.title': 'æ­¥é©Ÿ 2ï¼šé–‹å•Ÿæ–°åˆ†é ',
    'install.step2.desc': 'å®‰è£å®Œæˆå¾Œï¼Œé–‹å•Ÿæ–°åˆ†é å³å¯çœ‹åˆ° LinkTrove ä»‹é¢',

    'install.step3.title': 'æ­¥é©Ÿ 3ï¼šé–‹å§‹æ•´ç†æ›¸ç±¤',
    'install.step3.desc': 'å»ºç«‹ä½ çš„ç¬¬ä¸€å€‹é›†åˆï¼Œé–‹å§‹å„²å­˜åˆ†é ',

    'install.requirements': '<strong>ç³»çµ±éœ€æ±‚ï¼š</strong> Chrome 88+ æˆ–å…¶ä»– Chromium ç³»ç€è¦½å™¨ï¼ˆEdge, Brave, etc.ï¼‰',

    // Footer
    'footer.tagline': 'é‡æ–°å®šç¾©ç€è¦½å™¨æ›¸ç±¤ç®¡ç†é«”é©—',
    'footer.features_title': 'åŠŸèƒ½',
    'footer.features.hierarchy': 'å››å±¤ç´šæ¶æ§‹',
    'footer.features.dnd': 'æ‹–æ”¾æ’åº',
    'footer.features.sync': 'å³æ™‚åŒæ­¥',

    'footer.about_title': 'é—œæ–¼',
    'footer.about.benefits': 'ç‚ºä»€éº¼é¸æ“‡æˆ‘å€‘',
    'footer.about.get_started': 'é–‹å§‹ä½¿ç”¨',
    'footer.about.privacy': 'éš±ç§æ¬Šæ”¿ç­–',

    'footer.copyright': 'Â© 2026 LinkTrove. All rights reserved.',
  },

  'en': {
    // Meta
    'meta.title': 'LinkTrove - One Tab, All Your Bookmarks',
    'meta.description': 'Chrome extension for power users. 4-tier architecture, drag & drop, real-time sync, batch operations. Keep your research organized.',

    // Navigation
    'nav.features': 'Features',
    'nav.demo': 'Demo',
    'nav.installation': 'Installation',
    'nav.install_cta': 'Install Now',

    // Hero Section
    'hero.title': 'One Tab, All Your Bookmarks',
    'hero.subtitle': 'Chrome extension designed for power tab users. 4-tier architecture, drag & drop, real-time sync, batch operationsâ€”keep your research perfectly organized.',
    'hero.cta': 'Free Install',
    'hero.learn_more': 'Learn More',

    // Features Section
    'features.title': 'Features',
    'features.subtitle': 'Powerful features designed for heavy tab users',

    'feature.hierarchy.title': '4-Tier Architecture',
    'feature.hierarchy.desc': 'Organizations â†’ Collections â†’ Groups â†’ Cards hierarchical management for organized bookmarks',

    'feature.dnd.title': 'Drag & Drop',
    'feature.dnd.desc': 'Intuitive drag-and-drop cards, freely reorder, permanently saved',

    'feature.sync.title': 'Real-time Tab Sync',
    'feature.sync.desc': 'Multi-window tab real-time sync with cross-window drag support',

    'feature.batch.title': 'Batch Operations',
    'feature.batch.desc': 'Multi-select cards, batch delete/move/open for efficient management',

    'feature.share.title': 'GitHub Gist Sharing',
    'feature.share.desc': 'One-click generate sharing links via GitHub Gist, public or private',

    'feature.import.title': 'Import/Export',
    'feature.import.desc': 'Support Toby v3/v4 JSON, HTML bookmarks import, full backup & restore',

    // Demo Section
    'demo.title': 'Try Saving Tabs as Cards',
    'demo.subtitle': 'Drag tabs from the right to the left to experience seamless bookmark saving',
    'demo.saved_cards': 'Saved Cards',
    'demo.open_tabs': 'Open Tabs',
    'demo.drag_hint': 'Drag tabs here to save',
    'demo.caption': 'Hierarchical Interface Design',
    'demo.hint': 'ğŸ’¡ Hint: Drag tabs from right to left save area (supports mouse & touch)',

    // Benefits Section
    'benefits.title': 'Why Choose LinkTrove',
    'benefits.subtitle': 'Solving real pain points from users\' perspective',

    'benefit1.number': '01',
    'benefit1.title': 'Say Goodbye to Tab Hell',
    'benefit1.desc': 'Too many Chrome tabs causing memory explosion, can\'t find the pages you need? Save tabs as cards, quickly search (Ctrl+K) to open when needed, keep your browser light.',

    'benefit2.number': '02',
    'benefit2.title': 'Systematize Research Data',
    'benefit2.desc': 'Research data scattered everywhere, hard to organize? Use hierarchical organization (Organizations â†’ Collections â†’ Groups â†’ Cards) for well-organized knowledge management.',

    'benefit3.number': '03',
    'benefit3.title': 'Painless Multi-device Sync',
    'benefit3.desc': 'Lost bookmarks when switching computers or browsers? Supports Google Drive cloud sync for automatic cross-device backup. Also export JSON backups anytime.',

    // Installation Section
    'install.title': 'Get Started with LinkTrove',
    'install.subtitle': 'Choose the installation method that suits you',
    'install.step1.title': 'Step 1: Install Extension',
    'install.step1.desc': 'Download and install LinkTrove extension from Chrome Web Store',
    'install.step1.button': 'Go to Chrome Web Store',

    'install.step2.title': 'Step 2: Open New Tab',
    'install.step2.desc': 'After installation, open a new tab to see LinkTrove interface',

    'install.step3.title': 'Step 3: Start Organizing Bookmarks',
    'install.step3.desc': 'Create your first collection and start saving tabs',

    'install.requirements': '<strong>Requirements:</strong> Chrome 88+ or other Chromium-based browsers (Edge, Brave, etc.)',

    // Footer
    'footer.tagline': 'Redefining browser bookmark management',
    'footer.features_title': 'Features',
    'footer.features.hierarchy': '4-Tier Architecture',
    'footer.features.dnd': 'Drag & Drop',
    'footer.features.sync': 'Real-time Sync',

    'footer.about_title': 'About',
    'footer.about.benefits': 'Why Choose Us',
    'footer.about.get_started': 'Get Started',
    'footer.about.privacy': 'Privacy Policy',

    'footer.copyright': 'Â© 2026 LinkTrove. All rights reserved.',
  }
};

// Language switcher
class I18n {
  constructor() {
    this.currentLang = this.detectLanguage();
    this.init();
  }

  detectLanguage() {
    // Check localStorage first
    const saved = localStorage.getItem('linktrove-lang');
    if (saved && translations[saved]) {
      return saved;
    }

    // Check browser language
    const browserLang = navigator.language || navigator.userLanguage;
    if (browserLang.startsWith('zh')) {
      return 'zh-TW';
    }

    return 'en';
  }

  init() {
    this.applyLanguage(this.currentLang);
  }

  switchLanguage(lang) {
    if (!translations[lang]) return;

    this.currentLang = lang;
    localStorage.setItem('linktrove-lang', lang);
    this.applyLanguage(lang);

    // Update active button state
    document.querySelectorAll('[data-lang-btn]').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.langBtn === lang);
    });
  }

  applyLanguage(lang) {
    const dict = translations[lang];

    // Update meta tags
    document.title = dict['meta.title'];
    document.querySelector('meta[name="description"]')?.setAttribute('content', dict['meta.description']);
    document.querySelector('meta[name="title"]')?.setAttribute('content', dict['meta.title']);

    // Update all elements with data-i18n
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      const translation = dict[key];

      if (translation) {
        // Handle different element types
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          if (el.getAttribute('placeholder') !== null) {
            el.setAttribute('placeholder', translation);
          } else {
            el.value = translation;
          }
        } else {
          // Use innerHTML for translations that contain HTML tags
          if (key === 'install.requirements') {
            el.innerHTML = translation;
          } else {
            el.textContent = translation;
          }
        }
      }
    });

    // Update HTML lang attribute
    document.documentElement.lang = lang === 'zh-TW' ? 'zh-TW' : 'en';
  }

  getCurrentLanguage() {
    return this.currentLang;
  }
}

// Export
window.i18n = new I18n();
