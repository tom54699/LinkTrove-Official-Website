// Language translations
const translations = {
  'zh-TW': {
    // Meta
    'meta.title': 'LinkTrove - 一個分頁，管理所有書籤',
    'meta.description': '為重度分頁使用者設計的 Chrome 擴充功能。四層級架構、拖放排序、即時同步、批次操作，讓你的研究資料井然有序。',

    // Navigation
    'nav.features': '功能特色',
    'nav.demo': '互動展示',
    'nav.installation': '安裝指南',
    'nav.install_cta': '立即安裝',

    // Hero Section
    'hero.title': '一個分頁，管理所有書籤',
    'hero.subtitle': '為重度分頁使用者設計的 Chrome 擴充功能。四層級架構、拖放排序、即時同步、批次操作，讓你的研究資料井然有序。',
    'hero.cta': '免費安裝',
    'hero.learn_more': '了解更多',

    // Demo Section
    'demo.title': '試試將分頁儲存為卡片',
    'demo.subtitle': '拖曳右側的開啟分頁到左側，體驗儲存書籤的流暢操作',
    'demo.saved_cards': '已儲存卡片',
    'demo.open_tabs': '開啟的分頁',
    'demo.drag_hint': '將分頁拖曳到這裡儲存',
    'demo.caption': '層級化介面設計',

    // Features Section
    'features.title': '為什麼選擇 LinkTrove？',
    'features.subtitle': '專為需要管理大量分頁和書籤的使用者設計',

    'feature.hierarchy.title': '四層級架構',
    'feature.hierarchy.desc': '組織 → 集合 → 群組 → 卡片 層級管理，讓大量書籤井然有序',

    'feature.dnd.title': '拖放排序',
    'feature.dnd.desc': '直覺的拖放操作，輕鬆重新排列卡片順序',

    'feature.sync.title': '即時同步',
    'feature.sync.desc': '自動同步所有開啟的分頁，多視窗支援',

    'feature.batch.title': '批次操作',
    'feature.batch.desc': '多選卡片進行批次刪除、移動或開啟',

    'feature.share.title': 'GitHub Gist 分享',
    'feature.share.desc': '一鍵發布分享連結到 GitHub Gist',

    'feature.import.title': '匯入 / 匯出',
    'feature.import.desc': '支援 Toby JSON 和 HTML 書籤格式',

    // Benefits Section
    'benefits.title': '提升你的工作效率',
    'benefits.subtitle': '讓分頁管理變得簡單有序',

    'benefit.organize.title': '井然有序',
    'benefit.organize.desc': '不再被數十個分頁淹沒，所有內容都有條理地分類',

    'benefit.productivity.title': '提升生產力',
    'benefit.productivity.desc': '快速找到需要的資料，節省搜尋時間',

    'benefit.sync.title': '跨裝置同步',
    'benefit.sync.desc': '使用 Google Drive 在不同電腦間同步你的書籤',

    // Installation Section
    'install.title': '開始使用 LinkTrove',
    'install.step1.title': '步驟 1：安裝擴充功能',
    'install.step1.desc': '從 Chrome Web Store 安裝',
    'install.step1.button': '前往 Chrome Web Store',

    'install.step2.title': '步驟 2：開啟新分頁',
    'install.step2.desc': '安裝後開啟新分頁即可使用',

    'install.step3.title': '步驟 3：開始整理',
    'install.step3.desc': '建立集合，儲存你的分頁',

    // Footer
    'footer.tagline': '重新定義瀏覽器書籤管理體驗',
    'footer.features_title': '功能',
    'footer.features.hierarchy': '四層級架構',
    'footer.features.dnd': '拖放排序',
    'footer.features.sync': '即時同步',

    'footer.about_title': '關於',
    'footer.about.benefits': '為什麼選擇我們',
    'footer.about.get_started': '開始使用',
    'footer.about.privacy': '隱私權政策',

    'footer.copyright': '© 2026 LinkTrove. All rights reserved.',
  },

  'en': {
    // Meta
    'meta.title': 'LinkTrove - One Tab, All Your Bookmarks',
    'meta.description': 'Chrome extension for power users. 4-tier architecture, drag & drop, real-time sync, batch operations. Keep your research organized.',

    // Navigation
    'nav.features': 'Features',
    'nav.demo': 'Demo',
    'nav.installation': 'Installation',
    'nav.install_cta': 'Install Now',

    // Hero Section
    'hero.title': 'One Tab, All Your Bookmarks',
    'hero.subtitle': 'Chrome extension designed for power tab users. 4-tier architecture, drag & drop, real-time sync, batch operations—keep your research perfectly organized.',
    'hero.cta': 'Free Install',
    'hero.learn_more': 'Learn More',

    // Demo Section
    'demo.title': 'Try Saving Tabs as Cards',
    'demo.subtitle': 'Drag tabs from the right to the left to experience seamless bookmark saving',
    'demo.saved_cards': 'Saved Cards',
    'demo.open_tabs': 'Open Tabs',
    'demo.drag_hint': 'Drag tabs here to save',
    'demo.caption': 'Hierarchical Interface Design',

    // Features Section
    'features.title': 'Why Choose LinkTrove?',
    'features.subtitle': 'Designed for users who manage tons of tabs and bookmarks',

    'feature.hierarchy.title': '4-Tier Architecture',
    'feature.hierarchy.desc': 'Organizations → Collections → Groups → Cards hierarchical management for organized bookmarks',

    'feature.dnd.title': 'Drag & Drop',
    'feature.dnd.desc': 'Intuitive drag-and-drop to reorder cards effortlessly',

    'feature.sync.title': 'Real-time Sync',
    'feature.sync.desc': 'Auto-sync all open tabs with multi-window support',

    'feature.batch.title': 'Batch Operations',
    'feature.batch.desc': 'Multi-select cards for batch delete, move, or open',

    'feature.share.title': 'GitHub Gist Sharing',
    'feature.share.desc': 'One-click publish sharing links to GitHub Gist',

    'feature.import.title': 'Import / Export',
    'feature.import.desc': 'Support for Toby JSON and HTML bookmark formats',

    // Benefits Section
    'benefits.title': 'Boost Your Productivity',
    'benefits.subtitle': 'Make tab management simple and organized',

    'benefit.organize.title': 'Stay Organized',
    'benefit.organize.desc': 'No more drowning in dozens of tabs—everything neatly categorized',

    'benefit.productivity.title': 'Increase Productivity',
    'benefit.productivity.desc': 'Quickly find what you need, save search time',

    'benefit.sync.title': 'Cross-device Sync',
    'benefit.sync.desc': 'Use Google Drive to sync bookmarks across devices',

    // Installation Section
    'install.title': 'Get Started with LinkTrove',
    'install.step1.title': 'Step 1: Install Extension',
    'install.step1.desc': 'Install from Chrome Web Store',
    'install.step1.button': 'Go to Chrome Web Store',

    'install.step2.title': 'Step 2: Open New Tab',
    'install.step2.desc': 'Use LinkTrove after installation by opening a new tab',

    'install.step3.title': 'Step 3: Start Organizing',
    'install.step3.desc': 'Create collections and save your tabs',

    // Footer
    'footer.tagline': 'Redefining browser bookmark management',
    'footer.features_title': 'Features',
    'footer.features.hierarchy': '4-Tier Architecture',
    'footer.features.dnd': 'Drag & Drop',
    'footer.features.sync': 'Real-time Sync',

    'footer.about_title': 'About',
    'footer.about.benefits': 'Why Choose Us',
    'footer.about.get_started': 'Get Started',
    'footer.about.privacy': 'Privacy Policy',

    'footer.copyright': '© 2026 LinkTrove. All rights reserved.',
  }
};

// Language switcher
class I18n {
  constructor() {
    this.currentLang = this.detectLanguage();
    this.init();
  }

  detectLanguage() {
    // Check localStorage first
    const saved = localStorage.getItem('linktrove-lang');
    if (saved && translations[saved]) {
      return saved;
    }

    // Check browser language
    const browserLang = navigator.language || navigator.userLanguage;
    if (browserLang.startsWith('zh')) {
      return 'zh-TW';
    }

    return 'en';
  }

  init() {
    this.applyLanguage(this.currentLang);
  }

  switchLanguage(lang) {
    if (!translations[lang]) return;

    this.currentLang = lang;
    localStorage.setItem('linktrove-lang', lang);
    this.applyLanguage(lang);

    // Update active button state
    document.querySelectorAll('[data-lang-btn]').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.langBtn === lang);
    });
  }

  applyLanguage(lang) {
    const dict = translations[lang];

    // Update meta tags
    document.title = dict['meta.title'];
    document.querySelector('meta[name="description"]')?.setAttribute('content', dict['meta.description']);
    document.querySelector('meta[name="title"]')?.setAttribute('content', dict['meta.title']);

    // Update all elements with data-i18n
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      const translation = dict[key];

      if (translation) {
        // Handle different element types
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          if (el.getAttribute('placeholder') !== null) {
            el.setAttribute('placeholder', translation);
          } else {
            el.value = translation;
          }
        } else {
          el.textContent = translation;
        }
      }
    });

    // Update HTML lang attribute
    document.documentElement.lang = lang === 'zh-TW' ? 'zh-TW' : 'en';
  }

  getCurrentLanguage() {
    return this.currentLang;
  }
}

// Export
window.i18n = new I18n();
